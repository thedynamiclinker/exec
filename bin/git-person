#!/usr/bin/env bash


OPTIONS=(--regexp-ignore-case --perl-regexp)
EXCLUDE=(-- . ':(exclude,glob)**/*.lock' ':(exclude,glob)**/*.json' ':(exclude,glob)**/*.ipynb')

while [[ -n $1 ]]; do
    case $1 in
        -a|--ago)
            shift
            SINCE=$(ago "$1")
            OPTIONS+=(--since="$SINCE")
            ;;
        -s|--since)
            shift
            OPTIONS+=(--since="$1")
            ;;
        -u|--until)
            shift
            OPTIONS+=(--until="$1")
            ;;
        -*)
            OPTIONS+=("$1")
            ;;
        *)
            OPTIONS+=(--author="$1")
            ;;
    esac
    shift
done

git log "${OPTIONS[@]}" "${EXCLUDE[@]}"
