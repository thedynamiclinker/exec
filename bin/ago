#!/usr/bin/env bash

AGO="${1:-5Y}"
NUM="${AGO::-1}"    # All but last char
UNIT="${AGO: -1}"   # Last char

case "$UNIT" in
    Y|y) RELATIVE="$NUM year ago";;
    M|m) RELATIVE="$NUM month ago";;
    W|w) RELATIVE="$NUM week ago";;
    D|d) RELATIVE="$NUM day ago";;
    *) echo "Invalid duration: use Nd, Nw, or NM (e.g., 10d, 2w, 1M)" >&2; exit 1;;
esac

date --date="$RELATIVE" +%Y-%m-%d
